{"ast":null,"code":"import _defineProperty from\"/Users/tomcastagna/Development/code/mod_five/Project/space_friends/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/tomcastagna/Development/code/mod_five/Project/space_friends/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomcastagna/Development/code/mod_five/Project/space_friends/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/tomcastagna/Development/code/mod_five/Project/space_friends/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/tomcastagna/Development/code/mod_five/Project/space_friends/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/tomcastagna/Development/code/mod_five/Project/space_friends/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import BossIntro from'./BossIntro';var highscores;var LevelEnd=/*#__PURE__*/function(_Component){_inherits(LevelEnd,_Component);function LevelEnd(){var _getPrototypeOf2;var _this;_classCallCheck(this,LevelEnd);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(LevelEnd)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={gameEnd:false,highscores:null,name:'',score:null,showBossIntro:false,currentWinner:null,scoresIndex:0,showForm:true};_this.componentDidMount=function(){if(_this.props.success){_this.setCurrentScore();_this.getHighscores();}};_this.handleReturn=function(newGame){if(newGame===true){_this.props.stopMusic();}_this.props.levelComplete(_this.props.success,_this.props.levelPoints,_this.props.health,newGame===false?false:true);};_this.handleBossIntro=function(){_this.setState({showBossIntro:true});};_this.displayHighscores=function(){var index=_this.state.scoresIndex;var allHighscores=_this.state.highscores;if(_this.state.currentWinner!==null&&!allHighscores.includes(_this.state.currentWinner)){allHighscores.push(_this.state.currentWinner);}allHighscores.sort(function(a,b){return a.score<b.score?1:-1;});highscores=allHighscores.slice(index,index+5);return highscores.map(function(score){return React.createElement(\"li\",{key:score.id,className:\"text\",style:{marginLeft:'34%',padding:'1%'}},score.name,\" . . . \",score.score);});};_this.setCurrentScore=function(){_this.setState({score:_this.props.levelPoints+_this.props.totalPoints});};_this.getHighscores=function(){fetch('https://react-blaster-backend.herokuapp.com/users').then(function(resp){return resp.json();}).then(function(data){_this.setState({highscores:data.sort(function(a,b){return a.score<b.score?1:-1;})});});};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleHighScores=function(event){event.preventDefault();fetch('https://react-blaster-backend.herokuapp.com/highscore',{method:'POST',headers:{\"Content-Type\":\"application/json\",'Accept':\"application/json\"},body:JSON.stringify({name:_this.state.name,score:_this.state.score})}).then(function(resp){return resp.json();}).then(function(data){if(data.errors){alert(data.errors);}});_this.setState({showForm:false,name:_this.state.name,score:_this.state.score,currentWinner:{name:_this.state.name,score:_this.state.score}});};_this.moreScores=function(){//some sort of conditional to check the length of the scores array\nif(_this.state.highscores[_this.state.scoresIndex+6]){_this.setState({scoresIndex:_this.state.scoresIndex+5});}else{_this.setState({scoresIndex:0});}};return _this;}_createClass(LevelEnd,[{key:\"render\",value:function render(){var _this2=this;if(this.state.showBossIntro===true){return React.createElement(BossIntro,{health:this.props.health,success:this.props.success,levelPoints:this.props.levelPoints,levelComplete:this.props.levelComplete,handleReturn:this.handleReturn});}else{return React.createElement(\"div\",{className:\"level-end-container\"},React.createElement(\"div\",{className:\"level-end-grid\"},React.createElement(\"div\",null,React.createElement(\"p\",{className:\"level-end-text\"},this.props.success?\"Congrats! You Scored \".concat(this.props.levelPoints,\" Points!\"):'Sorry, you lost this time around...'),React.createElement(\"p\",{className:\"level-end-text\"},this.props.gameComplete?\"You Beat The Game With \".concat(this.state.score,\" Points!\"):null),React.createElement(\"p\",{className:\"level-end-text\"},this.props.gameComplete?\"Enter Your Name Below:\":null)),React.createElement(\"div\",null,React.createElement(\"button\",{style:{display:this.props.gameComplete?'none':'block'},className:\"hvr-ripple-out\",onClick:this.props.levelName==='Level Three'&&this.props.success?this.handleBossIntro:function(){return _this2.handleReturn(false);}},\"Continue\"),React.createElement(\"button\",{style:{display:this.props.gameComplete?'block':'none'},className:\"hvr-ripple-out\",onClick:function onClick(){return _this2.handleReturn(true);}},\"Play Again?\"))),React.createElement(\"div\",{className:\"highscores-container\",style:{display:this.props.gameComplete?'block':'none'}},React.createElement(\"h4\",{className:\"text\",style:{marginLeft:'40%'}},\"High Scores\"),React.createElement(\"form\",{className:\"form\",onSubmit:this.handleHighScores,style:{display:this.state.showForm?'block':'none'}},React.createElement(\"input\",{className:\"input\",name:\"name\",value:this.state.name,onChange:this.handleChange,placeholder:\"Name...\"}),React.createElement(\"button\",{className:\"scores-button\",type:\"submit\"},\"Submit\")),React.createElement(\"ul\",null,this.state.highscores?this.displayHighscores():null),React.createElement(\"button\",{className:\"more-button\",onClick:function onClick(){return _this2.moreScores();}},\"More\")));}}}]);return LevelEnd;}(Component);export{LevelEnd as default};","map":{"version":3,"sources":["/Users/tomcastagna/Development/code/mod_five/Project/space_friends/src/Components/LevelEnd.js"],"names":["React","Component","BossIntro","highscores","LevelEnd","state","gameEnd","name","score","showBossIntro","currentWinner","scoresIndex","showForm","componentDidMount","props","success","setCurrentScore","getHighscores","handleReturn","newGame","stopMusic","levelComplete","levelPoints","health","handleBossIntro","setState","displayHighscores","index","allHighscores","includes","push","sort","a","b","slice","map","id","marginLeft","padding","totalPoints","fetch","then","resp","json","data","handleChange","event","target","value","handleHighScores","preventDefault","method","headers","body","JSON","stringify","errors","alert","moreScores","gameComplete","display","levelName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport BossIntro from './BossIntro'\n\nlet highscores;\n\nexport default class LevelEnd extends Component {\n\n    state = {\n        gameEnd: false,\n        highscores: null,\n        name: '',\n        score: null,\n        showBossIntro: false,\n        currentWinner: null,\n        scoresIndex: 0,\n        showForm: true\n    }\n\n    componentDidMount = () => {\n        \n        if(this.props.success){\n            this.setCurrentScore()\n            this.getHighscores()\n        }\n    }\n\n    handleReturn = (newGame) => {\n        if(newGame === true){\n            this.props.stopMusic()\n        }\n        this.props.levelComplete(this.props.success, this.props.levelPoints, this.props.health, newGame === false ? false : true)\n    }\n\n    handleBossIntro = () => {\n        this.setState({\n            showBossIntro: true\n        })\n    }\n\n    displayHighscores = () => {\n        let index = this.state.scoresIndex;\n        let allHighscores = this.state.highscores\n        if(this.state.currentWinner !== null && !allHighscores.includes(this.state.currentWinner)){\n            allHighscores.push(this.state.currentWinner)\n        }\n        allHighscores.sort((a,b) => a.score < b.score ? 1 : -1)\n        highscores = allHighscores.slice(index,index+5)\n        return( highscores.map(score => <li key={score.id} className='text' style={{marginLeft: '34%', padding: '1%'}}>{score.name} . . . {score.score}</li>) )\n    }\n\n    setCurrentScore = () => {\n        this.setState({\n            score: this.props.levelPoints + this.props.totalPoints\n        })\n    }\n\n    getHighscores = () => {\n        fetch('https://react-blaster-backend.herokuapp.com/users')\n        .then(resp => resp.json())\n        .then(data => {\n            this.setState({\n                highscores: data.sort((a,b) => a.score < b.score ? 1 : -1)\n            })\n        })\n    }\n\n    handleChange = (event) => {\n        this.setState({\n          [event.target.name]: event.target.value\n        })\n    }\n\n    handleHighScores = (event) => {\n        event.preventDefault()\n        fetch('https://react-blaster-backend.herokuapp.com/highscore',{\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                'Accept': \"application/json\"\n            },\n            body: JSON.stringify({\n                name: this.state.name,\n                score: this.state.score\n                })\n        })\n        .then(resp => resp.json())\n        .then(data => {\n            if (data.errors){\n                alert(data.errors)\n            }\n        })\n        this.setState({\n            showForm: false,\n            name: this.state.name,\n            score: this.state.score,\n            currentWinner: {name: this.state.name, score: this.state.score}\n        })\n    }\n\n    moreScores = () => {\n        //some sort of conditional to check the length of the scores array\n        if(this.state.highscores[this.state.scoresIndex + 6]){\n            this.setState({\n                scoresIndex: this.state.scoresIndex + 5\n            })\n        }\n        else{\n            this.setState({\n                scoresIndex: 0\n            }) \n        }\n    }\n\n    render(){\n        if(this.state.showBossIntro === true){\n            return(\n                <BossIntro\n                    health={this.props.health} \n                    success={this.props.success}\n                    levelPoints={this.props.levelPoints}\n                    levelComplete={this.props.levelComplete}\n                    handleReturn={this.handleReturn} \n                />\n            )\n        }\n        else{\n            return(\n                <div className='level-end-container'>\n                    <div className='level-end-grid'>\n                        <div>\n                            <p className='level-end-text'>\n                                {this.props.success ? `Congrats! You Scored ${this.props.levelPoints} Points!` : 'Sorry, you lost this time around...'}\n                            </p>\n                            <p className='level-end-text'>\n                            {this.props.gameComplete ? `You Beat The Game With ${this.state.score} Points!` : null}\n                            </p>\n                            <p className='level-end-text'>\n                            {this.props.gameComplete ? `Enter Your Name Below:` : null}\n                            </p>\n                        </div>\n                        <div>\n                            <button style={{display: this.props.gameComplete ? 'none' : 'block'}}\n                            className='hvr-ripple-out' \n                            onClick={this.props.levelName === 'Level Three' && this.props.success ? this.handleBossIntro : () => this.handleReturn(false)}>Continue\n                            </button>\n                            <button style={{display: this.props.gameComplete ? 'block' : 'none'}}\n                            className='hvr-ripple-out' \n                            onClick={() => this.handleReturn(true)}>Play Again?\n                            </button>\n                        </div>\n                    </div>\n                    <div className='highscores-container' style={{display: this.props.gameComplete ? 'block' : 'none'}}>\n                        <h4 className='text' style={{marginLeft: '40%'}}>High Scores</h4>\n                        <form className=\"form\" onSubmit={this.handleHighScores} style={{display: this.state.showForm ? 'block' : 'none'}}>\n                            <input className=\"input\" name=\"name\" value={this.state.name} onChange={this.handleChange} placeholder=\"Name...\" />\n                            <button className='scores-button' type=\"submit\">Submit</button>\n                        </form>\n                        <ul>\n                            {this.state.highscores ? this.displayHighscores() : null}\n                        </ul>\n                        <button className='more-button' onClick={() => this.moreScores()}>More</button>\n                    </div>\n                </div>\n            )\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}